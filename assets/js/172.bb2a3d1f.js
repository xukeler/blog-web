(window.webpackJsonp=window.webpackJsonp||[]).push([[172],{703:function(s,t,e){"use strict";e.r(t);var a=e(31),n=Object(a.a)({},(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h3",{attrs:{id:"vue开发插件发布到npm"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#vue开发插件发布到npm"}},[s._v("#")]),s._v(" vue开发插件发布到npm")]),s._v(" "),e("ul",[e("li",[s._v("开发经常会遇到这种场景，一般的"),e("code",[s._v("ui")]),s._v("框架满足不了需求，所以要自己封装组件，在多个项目中都有用到，例如"),e("code",[s._v("checkbox")]),s._v("组件等，一般是复制粘贴过去，但是这种不太好，如果是全程参与多个项目开发的人，他知道哪个项目里面有可以复用的组件，直接粘贴过来就能用，但是对于新来的员工，他是不知道，新员工开发的时候可能会找插件或者重新封装，这个就比较浪费资源了，而且还不统一。所以可以把跨项目通用的组件封装成一个"),e("code",[s._v("vue")]),s._v("插件，上传到"),e("code",[s._v("npm")]),s._v("，每次要用直接"),e("code",[s._v("npm install")]),s._v("安装使用，再维护一个文档记录"),e("code",[s._v("npm")]),s._v("插件。")])]),s._v(" "),e("h3",{attrs:{id:"开发"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#开发"}},[s._v("#")]),s._v(" 开发")]),s._v(" "),e("ul",[e("li",[s._v("开发一个"),e("code",[s._v("vue")]),s._v("插件合正常开发组件一样，使用"),e("code",[s._v("vue-cli")]),s._v("脚手架搭建一个项目，新建一个总目录，再创建一个子目录，在子目录创建一个组件，正常测试功能都正常，在总目录和子目录内分别添加一个"),e("code",[s._v("index.js")]),s._v("文件，总目录"),e("code",[s._v("npm init")]),s._v("添加一个"),e("code",[s._v("package.json")]),s._v("文件，一个"),e("code",[s._v("README.md")]),s._v("文件。")]),s._v(" "),e("li",[s._v("目录结构，也可以增加其它子目录没有限制。\n"),e("ul",[e("li",[e("code",[s._v("checkBox")]),s._v("总目录\n"),e("ul",[e("li",[e("code",[s._v("lib")]),s._v("子目录\n"),e("ul",[e("li",[e("code",[s._v("XXXXX.vue")]),s._v("组件")]),s._v(" "),e("li",[e("code",[s._v("index.js")]),s._v("(暴露给"),e("code",[s._v("Vue")]),s._v("一个"),e("code",[s._v("install")]),s._v("方法,"),e("code",[s._v("install")]),s._v("方法接受两个参数，一个"),e("code",[s._v("vue")]),s._v("示例，一个"),e("code",[s._v("option")]),s._v(",在"),e("code",[s._v("install")]),s._v("方法内把组件注册成全局组件)")])])]),s._v(" "),e("li",[e("code",[s._v("index.js")]),s._v("(导出"),e("code",[s._v("lib")]),s._v("文件夹的"),e("code",[s._v("index.js")]),s._v(",目的是下载后可以"),e("code",[s._v("import")]),s._v("使用)。")]),s._v(" "),e("li",[e("code",[s._v("package.json")]),s._v("记录版本号，插件名等信息")]),s._v(" "),e("li",[e("code",[s._v("README.md")]),s._v("插件说明文件")])])])])])]),s._v(" "),e("p",[e("img",{attrs:{src:"/assets/images/vue/vue-plugin.png",alt:"image.png"}})]),s._v(" "),e("h3",{attrs:{id:"上传到npm"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#上传到npm"}},[s._v("#")]),s._v(" 上传到npm")]),s._v(" "),e("ul",[e("li",[s._v("上传到"),e("code",[s._v("npm")]),s._v("首先要注册一个"),e("code",[s._v("npm")]),s._v("账号，")]),s._v(" "),e("li",[s._v("然后在插件总目录用命令行工具执行"),e("code",[s._v("npm login")]),s._v("，输入用户名，密码，邮箱，验证邮箱后就登录成功，")]),s._v(" "),e("li",[s._v("执行"),e("code",[s._v("npm publish")]),s._v("命令上传到"),e("code",[s._v("npm")]),s._v("，上传成功后就可以在"),e("code",[s._v("npm")]),s._v("搜到了。")])]),s._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[s._v("注意")]),s._v(" "),e("p",[s._v("插件名不要和别人的重复，使用合法报名，否则上传不成功。")])]),s._v(" "),e("h3",{attrs:{id:"插件代码示例"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#插件代码示例"}},[s._v("#")]),s._v(" 插件代码示例")]),s._v(" "),e("ul",[e("li",[e("code",[s._v("checkBox/index.js")])])]),s._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[s._v("module"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./lib'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("ul",[e("li",[e("code",[s._v("checkBox/lib/index.js")])])]),s._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// checkBox.vue写我们的组件")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" checkBox "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"./checkBox.vue"')]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 定义我们的插件")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" myPlugin "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("    \n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 该插件有一个install方法")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 方法的第一个参数是传入的Vue，第二个参数可以插件的自定义参数")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("Vue"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" options")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 将其注册为vue的组件，'checkBox'是组件名，checkBox是我们开发的组件")]),s._v("\n        Vue"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("component")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'checkBox'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" checkBox"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("    \n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 最后将插件导出，并在main.js中通过Vue.use()即可使用插件")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v(" myPlugin\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br")])]),e("h3",{attrs:{id:"使用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用"}},[s._v("#")]),s._v(" 使用")]),s._v(" "),e("ul",[e("li",[s._v("使用先"),e("code",[s._v("npm install")]),s._v("下载安装，在"),e("code",[s._v("main.js")]),s._v("文件"),e("code",[s._v("import checkBox from 'checkbox-1'")]),s._v("引入。")]),s._v(" "),e("li",[e("code",[s._v("Vue.use(checkbox)")]),s._v("，安装插件，直接在页面使用即可。")])])])}),[],!1,null,null,null);t.default=n.exports}}]);