(window.webpackJsonp=window.webpackJsonp||[]).push([[175],{706:function(s,t,n){"use strict";n.r(t);var a=n(31),e=Object(a.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h3",{attrs:{id:"vue移动端px自动转换vw适配"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#vue移动端px自动转换vw适配"}},[s._v("#")]),s._v(" vue移动端px自动转换vw适配")]),s._v(" "),n("ul",[n("li",[s._v("在最新的"),n("code",[s._v("vue-cli3")]),s._v("搭建的项目中，搭建完成之后，使用"),n("code",[s._v("npm run serve")]),s._v("启动服务之后，会自动生成一个"),n("code",[s._v("postcss.config.js")]),s._v("的文件，如果没有自动生成，就手动新建一个文件。")])]),s._v(" "),n("p",[s._v("接下来下载插件 "),n("code",[s._v("postcss-import")]),s._v("，它的主要功能是解决"),n("code",[s._v("@import")]),s._v("引入路径问题。使用这个插件，可以让你很轻易的使用本地文件。"),n("code",[s._v("postcss-url")]),s._v("该插件主要用来处理文件，比如图片文件、字体文件等引用路径的处理。"),n("code",[s._v("autoprefixer")]),s._v("用来自动处理浏览器前缀的一个插件。如果你配置了"),n("a",{attrs:{href:"https://github.com/MoOx/postcss-cssnext",target:"_blank",rel:"noopener noreferrer"}},[n("code",[s._v("postcss-cssnext")]),n("OutboundLink")],1),s._v("，其中就已具备了"),n("code",[s._v("autoprefixer")]),s._v("的功能。")]),s._v(" "),n("p",[n("em",[s._v("Vue-cli默认配置了上述三个PostCSS插件，但我们要完成vw的布局兼容方案，或者说让我们能更专心的coding，还需要配置下面的几个PostCSS插件")])]),s._v(" "),n("ol",[n("li",[n("a",{attrs:{href:"https://github.com/yisibl/postcss-aspect-ratio-mini",target:"_blank",rel:"noopener noreferrer"}},[s._v("postcss-aspect-ratio-mini"),n("OutboundLink")],1)]),s._v(" "),n("li",[n("a",{attrs:{href:"https://github.com/evrone/postcss-px-to-viewport",target:"_blank",rel:"noopener noreferrer"}},[s._v("postcss-px-to-viewport"),n("OutboundLink")],1)]),s._v(" "),n("li",[n("a",{attrs:{href:"https://github.com/jonathantneal/postcss-write-svg",target:"_blank",rel:"noopener noreferrer"}},[s._v("postcss-write-svg"),n("OutboundLink")],1)]),s._v(" "),n("li",[n("a",{attrs:{href:"https://github.com/MoOx/postcss-cssnext",target:"_blank",rel:"noopener noreferrer"}},[s._v("postcss-cssnext"),n("OutboundLink")],1)]),s._v(" "),n("li",[n("a",{attrs:{href:"https://github.com/ben-eb/cssnano",target:"_blank",rel:"noopener noreferrer"}},[s._v("cssnano"),n("OutboundLink")],1)]),s._v(" "),n("li",[n("a",{attrs:{href:"https://github.com/springuper/postcss-viewport-units",target:"_blank",rel:"noopener noreferrer"}},[s._v("postcss-viewport-units"),n("OutboundLink")],1)])]),s._v(" "),n("p",[n("strong",[s._v("然后开始安装,这里使用淘宝镜像的cnpm安装")])]),s._v(" "),n("blockquote",[n("p",[s._v("cnpm i postcss-aspect-ratio-mini postcss-px-to-viewport postcss-write-svg postcss-cssnext postcss-viewport-units cssnano --save")])]),s._v(" "),n("p",[s._v("接下来开始配置"),n("code",[s._v("postcss.config.js")]),s._v("文件")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[s._v("module"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"plugins"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"postcss-import"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"postcss-url"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"postcss-aspect-ratio-mini"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"postcss-write-svg"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      utf8"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"postcss-cssnext"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"postcss-px-to-viewport"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      viewportWidth"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("750")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 视窗的宽度，对应的是我们设计稿的宽度，一般是750")]),s._v("\n      viewportHeight"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1334")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 视窗的高度，根据750设备的宽度来指定，一般指定1334，也可以不配置")]),s._v("\n      unitPrecision"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("     "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 指定`px`转换为视窗单位值的小数位数")]),s._v("\n      viewportUnit"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"vw"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//指定需要转换成的视窗单位，建议使用vw")]),s._v("\n      selectorBlackList"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'.ignore'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'.hairlines'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 指定不转换为视窗单位的类，可以自定义，可以无限添加,建议定义一至两个通用的类名")]),s._v("\n      minPixelValue"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("     "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 小于或等于`1px`不转换为视窗单位，你也可以设置为你想要的值")]),s._v("\n      mediaQuery"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("     "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 允许在媒体查询中转换`px`")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"postcss-viewport-units"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"cssnano"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      preset"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"advanced"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      autoprefixer"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"postcss-zindex"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br")])]),n("p",[n("code",[s._v("postcss-cssnext")]),s._v(":其实就是"),n("a",{attrs:{href:"https://cssnext.io/",target:"_blank",rel:"noopener noreferrer"}},[s._v("cssnext"),n("OutboundLink")],1),s._v("。该插件可以让我们使用CSS未来的特性，其会对这些特性做相关的兼容性处理。")]),s._v(" "),n("p",[n("code",[s._v("cssnano")]),s._v(":主要用来压缩和清理CSS代码。在Webpack中，"),n("code",[s._v("cssnano")]),s._v("和"),n("a",{attrs:{href:"https://github.com/webpack-contrib/css-loader",target:"_blank",rel:"noopener noreferrer"}},[n("code",[s._v("css-loader")]),n("OutboundLink")],1),s._v("捆绑在一起，所以不需要自己加载它,在"),n("code",[s._v("cssnano")]),s._v("的配置中，使用了"),n("code",[s._v("preset")]),s._v(": "),n("code",[s._v("advanced")]),s._v("，所以我们需要另外安装：")]),s._v(" "),n("blockquote",[n("p",[s._v("cnpm i cssnano-preset-advanced --save-dev")])]),s._v(" "),n("p",[n("code",[s._v("postcss-px-to-viewport")]),s._v(":要用来把"),n("code",[s._v("px")]),s._v("单位转换为"),n("code",[s._v("vw")]),s._v("、"),n("code",[s._v("vh")]),s._v("、"),n("code",[s._v("vmi")]),s._v(" "),n("code",[s._v("n")]),s._v("或者"),n("code",[s._v("vmax")]),s._v("这样的视窗单位，也是"),n("code",[s._v("vw")]),s._v("适配方案的核心插件之一。")]),s._v(" "),n("p",[n("code",[s._v("postcss-aspect-ratio-mini")]),s._v(":主要用来处理元素容器宽高比。")]),s._v(" "),n("p",[n("code",[s._v("postcss-write-svg")]),s._v(":插件主要用来处理移动端1px的解决方案。该插件主要使用的是border-image和background来做1px的相关处理。")]),s._v(" "),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[s._v("注意")]),s._v(" "),n("p",[s._v("如果在项目中使用了ui框架，可能会出现框架ui组件显示变小的问题，这是由于vw转换时将框架单位也转换成vw单位")])]),s._v(" "),n("p",[s._v("解决的方案有以下几种。\n1.改写框架的ui组件的css样式，也是比较简单的方法。\n2.在"),n("code",[s._v("postcss.config.js")]),s._v("中的"),n("code",[s._v("selectorBlackList")]),s._v("选项中增加不需要vw转换的类名，")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[s._v("selectorBlackList"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'.ignore'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'.hairlines'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])])])}),[],!1,null,null,null);t.default=e.exports}}]);